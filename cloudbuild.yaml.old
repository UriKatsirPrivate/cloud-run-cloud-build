# substitutions:
#   # _PROJECT_NUMBE: ${$PROJECT_NUMBER//5/6}
#   # _PROJECT_NUMBE: echo "${PROJECT_NUMBER//[5]/kk}" 
#   _PROJECT_NUMBE: export "${PROJECT_NUMBER//[5]/kk}" 
#   # _PROJECT_NUMBE: $PROJECT_NUMBER #works
#   # _PROJECT_NUMBE: echo "${PROJECT_NUMBER//[5]/kk}"
#   # _BAR: $PROJECT_NUMBER
steps:
  # - name: gcr.io/cloud-builders/docker
  #   args:
  #     - build
  #     - '-t'
  #     - gcr.io/$PROJECT_ID/cloud-run-cloud-build
  #     - .
  # - name: gcr.io/cloud-builders/docker
  #   args:
  #     - push
  #     - gcr.io/$PROJECT_ID/cloud-run-cloud-build
  - name: gcr.io/google.com/cloudsdktool/cloud-sdk
    entrypoint: gcloud
    args:
      - run
      - deploy
      - cloud-run-cloud-build
      - '--image'
      - gcr.io/$PROJECT_ID/cloud-run-cloud-build
      - '--region'
      - europe-west4
      - --allow-unauthenticated
      - '--revision-suffix'
      # - ${PROJECT_NUMBER//5/k}
      - ${PROJECT_NUMBER:5}
      # - $PROJECT_NUMBER
      # - '${_PROJECT_NUMBE}'
# images:
#   - gcr.io/$PROJECT_ID/cloud-run-cloud-build
options:
     dynamic_substitutions: true  